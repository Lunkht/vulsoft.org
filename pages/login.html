<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion - Vulsoft</title>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#3b82f6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Vulsoft">
    <meta name="msapplication-TileColor" content="#3b82f6">
    <meta name="msapplication-config" content="/browserconfig.xml">
    
    <!-- Manifest PWA -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/images/icon-180x180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icon-16x16.png">

    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/auth.css">
</head>

<body>
    <div class="auth-container">
        <!-- Section Contenu (Gauche) -->
        <div class="auth-content-section">
            <div class="auth-content">
            
                <div class="content-text">
                    <h2>Bienvenue sur Vulsoft</h2>
                    <p>Connectez-vous pour accéder à votre espace et gérer vos projets.</p>
                </div>
            </div>
        </div>

        <!-- Section Formulaire (Droite) -->
        <div class="auth-form-section">
            <div class="auth-form-container">
                <div class="auth-header">
                    <h1 class="auth-title">Connexion</h1>
                    <p class="auth-subtitle">Heureux de vous revoir !</p>
                </div>

                <!-- Formulaire de connexion -->
                <div class="auth-form-wrapper active" id="login-form-wrapper">
                    <form id="login-form" class="auth-form">
                        <div class="form-group">
                            <label for="username">Adresse e-mail</label>
                            <input type="email" id="username" name="username" required placeholder="votre@email.com">
                        </div>

                        <div class="form-group">
                            <label for="password">Mot de passe</label>
                            <input type="password" id="password" name="password" required placeholder="••••••••">
                        </div>

                        <div class="form-options">
                            <a href="forgot-password.html" class="forgot-password">Mot de passe oublié ?</a>
                        </div>

                        <button type="submit" class="auth-button">Se connecter</button>
                    </form>
                </div>
                <div id="login-error" class="auth-error"></div>

                <div class="auth-bottom">
                    Pas encore de compte ? <a href="signup.html">Inscrivez-vous</a>
                </div>
            </div>
        </div>
    </div>

    <script src="../js/vulsoft-auth.js"></script>
    <script>
        const auth = new VulsoftAuth({
            apiUrl: 'http://localhost:8001/api', // URL du backend FastAPI
            onAuthStateChanged: (user) => {
                if (user) {
                    window.location.href = 'dashboard.html'; // Rediriger vers le dashboard
                }
            }
        });

        const authUI = new VulsoftAuthUI(auth);

        authUI.handleLoginForm('login-form', {
            errorElement: 'login-error',
            redirectUrl: 'dashboard.html'
        });
    </script>
    <script src="../js/notifications.js"></script>
    <script src="../js/api.js"></script>
    <script src="../js/pwa.js"></script>
</body>

</html>